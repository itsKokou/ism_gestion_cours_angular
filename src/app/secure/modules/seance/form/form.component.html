<form [formGroup]="form" (ngSubmit)="onSubmit()" class="w-full rounded-lg px-4 py-3 mt-4 text-gray-500 border bg-white dark:border-gray-700 dark:text-gray-400 dark:bg-gray-800">
    
    <h4 class="mb-4 mt-1 text-lg font-semibold text-gray-600 dark:text-gray-300">
        Enregistrement de Séance
    </h4>
    <span style="color: #0ef700" class="transition-opacity duration-300 ease-in-out">
        {{success}}
    </span>
    <span style="color: red" class="transition-opacity duration-300 ease-in-out">
        {{echec}}
    </span>
   <div class="px-4 py-3 mt-4 0">
        <div  class="inline-flex mt-1 w-full text-gray-900 dark:text-gray-400" >
            <label for="date" class="mb-2  w-10" style="width:150px;">
                Date
            </label>
            <div style="padding-left:10%" class="w-full" >
                <input formControlName="date" type="date" id="date" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
            </div>
        </div>
        @if (form.controls['date'].errors && (form.controls['date'].dirty || form.controls['date'].touched)) {
            @if (date.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">La date est obligatoire</small>
            }
            @if (date.errors!['dateIsSunday']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">Un cours ne peut être fait un dimanche</small>
            }
            @if (date.errors!['dateIsToday']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">La date ne peut pas être aujourd'hui</small>
            }
            @if (date.errors!['dateIsPast']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">Un cours ne peut être fait dans le passé</small>
            }
        }
        <div  class="inline-flex mt-5 w-full text-gray-900 dark:text-gray-400" >
            <label for="heureD" class="mb-2  w-10" style="width:150px;">
                Heure de début
            </label>
            <div style="padding-left:10%" class="w-full" >
                <input formControlName="heureD" placeholder="Entrez l'heure sous format hh:mm" type="text" id="heureD" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
            </div>
        </div>
        @if (form.controls['heureD'].errors && (form.controls['heureD'].dirty || form.controls['heureD'].touched)) {
            @if (heureD.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure de début est obligatoire</small>
            }
            @if (heureD.errors!['isNotNumber']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure saisie doit être sous format hh:mm</small>
            }
            @if (heureD.errors!['heureDNotValid']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure saisie est invalide</small>
            }
            @if (heureD.errors!['heureDNotOkay']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure de début doit être entre 08:00 et 17:00</small>
            }
        }
        <div  class="inline-flex mt-5 w-full text-gray-900 dark:text-gray-400" >
            <label for="heureF" class="mb-2  w-10" style="width:150px;">
                Heure de fin
            </label>
            <div style="padding-left:10%" class="w-full" >
                <input (input)="touchHeureFin()" formControlName="heureF" placeholder="Entrez l'heure sous format hh:mm" type="text" id="heureF" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
            </div>
        </div>
        @if (form.controls['heureF'].errors && (form.controls['heureF'].dirty || form.controls['heureF'].touched)) {
            @if (heureF.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure de fin est obligatoire</small>
            }
            @if (heureF.errors!['isNotNumber']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure saisie doit être sous format hh:mm</small>
            }
            @if (heureF.errors!['heureFNotValid']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure saisie est invalide</small>
            }
            @if (heureF.errors!['heureFNotOkay']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">L'heure de fin doit être entre 11:00 et 20:00</small>
            }
            @if (heureF.errors!['heureF3heureD']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">La durée d'une session varie de 3 à 4 heures</small>
            }
        }
        <div  class="inline-flex mt-5 w-full text-gray-900 dark:text-gray-400" >
            <label for="code" class="mb-2  w-10" style="width:150px;">
                Code session
            </label>
            <div style="padding-left:10%" class="w-full" >
                <input (input)="touchCode()" formControlName="code" type="text" id="code" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
            </div>
        </div>
        @if (form.controls['code'].errors && (form.controls['code'].dirty || form.controls['code'].touched)) {
            @if (code.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">Le code est requis</small>
            }
            @if (code.errors!['min']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">Le code doit faire au minimum 5 caractères</small>
            }
        }
        <div  class="inline-flex mt-5 w-full">
            <label for="salle" style="width:150px;" class="mb-2 w-10 text-gray-900 dark:text-gray-400">
                Salle
            </label>
            <div style="padding-left:10%" class="w-full">
                <select (change)="touchSalle()" formControlName="salle" name="salle" id="salle" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                    <option [value]="0"></option>
                    @for (item of listSallesDisponibles; track $index) {
                        <option [value]="item.id" >{{item.libelle}}</option>
                    }
                </select>
            </div>
        </div>
        @if (form.controls['salle'].errors && (form.controls['salle'].dirty || form.controls['salle'].touched)) {
            @if (salle.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">La salle est requise</small>
            }
        }
        <div  class="inline-flex mt-5 w-full">
            <label for="professeur" style="width:150px;" class="mb-2 w-10 text-gray-900 dark:text-gray-400">
                Professeur
            </label>
            <div style="padding-left:10%" class="w-full">
                <select (keyup)="touchProfesseur()" (change)="effacerError()" formControlName="professeur" name="professeur" id="professeur" class="w-full px-4 h-10 bg-gray-50 dark:bg-gray-700 border border-gray-300 text-gray-900 rounded focus:ring-blue-500 focus:border-blue-500 block dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                    @for (item of listProfsDisponibles; track $index) {
                        <option [value]="item.id" >{{item.nomComplet}}</option>
                    }
                </select>
            </div>
        </div> 
        @if (form.controls['professeur'].errors && (form.controls['professeur'].dirty || form.controls['professeur'].touched)) {
            @if (professeur.errors!['required']){
                <small class="ml-10" style="padding-left:10%;  margin-left:135px; color: red">Veuillez choisir un nouveau professeur, l'autre étant indisponible</small>
            }
        }   
        <div class="inline-flex mt-4 w-full">
            <label class="mb-2 w-10"> </label>
            <div style="padding-left: 10%" class="w-full flex justify-end">
                <button type="submit" [disabled]="form.invalid" class="px-4 cursor-pointer py-2 text-sm font-medium leading-5 text-red-600 transition-colors duration-150 bg-transparent border border-red-600 rounded-lg hover:text-white hover:bg-red-600 focus:outline-none focus:shadow-outline-red">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>

</form>




